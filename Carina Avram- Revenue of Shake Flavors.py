#This program reads data such as shake flavors and the number of shakes sold per flavor from a file,
#and gives the summary sales data as a screen output along with a revenue table written in a different file.

#Declare global variables
SHAKEPRICE = 1.99 #This is the price per shake and it is a constant variable

def main():
    #Declare and initialize variables
    shakeFlavor = "" #This variable reads the shake flavor
    numShakesPerFlavor = "" #This avriable reads the number of shakes sold monthly per flavor
    shakesSold = 0 #This variable is used to store the total number of shakes
    revenuePerShakeFlavor = 0.00
    mostSoldFlavor = ""
    shakesMostSoldFlavor = 0
    leastSoldFlavor = ""
    shakesLeastSoldFlavor = 0
    count = 0 #This variable stores the total number of shake flavors
    
    #Open the input file (sales.txt) to read from it
    #The below exception handling is used to give an error message in case the file doesn't exist
    while True:
        try:
            infile = open('sales.txt', 'r')
        except IOError:
            print("\n'sales.txt' file does not exist. Make sure you have a file called 'sales.txt' in the folder, and then try again!")
            continue
        else:
            break
    #Open the output file (revenue.txt) to write data
    outfile = open('revenue.txt', 'w') 
    shakeFlavor = infile.readline() #This line of code reads the first line (shake flavor) from the sales.txt file
    numShakesPerFlavor = infile.readline() #This line of code reads the second line (number of shakes per flavor) from the sales.txt file
    
    #Write the headings for the output file (revenue.txt)
    outfile.write("{0:4s}{1:20s}{2:4s}{3:20s}".format("", "Ice Cream Flavor","", "Monthly Sales"))
    outfile.write("\n{0:4s}{1:20s}{2:4s}{3:20s}".format("", "----------------","", "-------------"))
    
    #The line of code below assigns the number of the shakes (second line from input file) to the shakesMostSoldFlavor and shakesLeastSoldFlavor variables.
    #This code is needed prior the loop so the program can keep track of the most and least shake flavor sold,
    #while also considering the first flavor from the file.
    shakesMostSoldFlavor = int(numShakesPerFlavor) 
    shakesLeastSoldFlavor = int(numShakesPerFlavor)
    while (shakeFlavor != ""): #This is the EOF loop
        shakeFlavor = shakeFlavor.rstrip('\n') #This strips the '\n' from the shakeFlavor variable
        revenuePerShakeFlavor = SHAKEPRICE * int(numShakesPerFlavor) #This calculates the revenue for each flavor by multiplying the number of shakes
                                                                     #per each flavor and the price per shake ($1.99)
        shakesSold = shakesSold + int(numShakesPerFlavor) #This keeps track of the total shakes sold
        
        #The line of code below writes into the output (revenue.txt) file the first shake flavor along with its revenue
        outfile.write("\n{0:4s}{1:20s}{2:4s}${3:20s}".format("", shakeFlavor,"", str(format(revenuePerShakeFlavor, ',.2f'))))
        
        #The if statement below keeps track of the most sold flavor and the number of shakes sold for the most sold flavor.
        if (int(numShakesPerFlavor) >= shakesMostSoldFlavor): #The '=' sign is needed to be included in order for the program to consider
                                                                #also the first shake flavor (first two lines from the input file)
            mostSoldFlavor = shakeFlavor #This keeps track of the most shake flavor sold
            shakesMostSoldFlavor = int(numShakesPerFlavor) #This line of code is needed so the program can compare again the number of shakes for the next
                                                             #flavor with the previous one throughout the loop
        #The if statement below keeps track of the least sold flavor and the number of shakes sold for the least sold flavor.
        if (int(numShakesPerFlavor) <= shakesLeastSoldFlavor): 
            leastSoldFlavor = shakeFlavor #This keeps track of the least shake flavor sold
            shakesLeastSoldFlavor = int(numShakesPerFlavor) #This line of code is needed so the program can compare again the number of shakes for the next
                                                              #flavor with the previous one throughout the loop
        count += 1 #This keeps track of the total shake flavors
        
        #The two below lines of code read another shake flavor along with the number of shakes sold monthly for that flavor
        shakeFlavor = infile.readline()
        numShakesPerFlavor = infile.readline()

    #Give a summary output
    ShowSummaryOutput(mostSoldFlavor, leastSoldFlavor, shakesSold, count, outfile, shakesMostSoldFlavor, shakesLeastSoldFlavor)
    
    #Close both files
    infile.close() #This line of code closes the input file (sales.txt)
    outfile.close() #This lines of code closes the output file (revenue.txt)
    
def ShowSummaryOutput(mostSoldFlavor, leastSoldFlavor, shakesSold, count, outfile, shakesMostSoldFlavor, shakesLeastSoldFlavor):
    #This function gives the output of the summary sales data
    #Declare local variables
    totalSales = 0.00
    totalSales = shakesSold * SHAKEPRICE #This calculates the monthly total sales by multiplying total shakes sold and its price ($1.99)
    #Show summary sales data
    print("\nBelow is sales summary data")
    print("\n\t{0:s} had the highest sales this month of ${1:,.2f}".format(mostSoldFlavor, SHAKEPRICE * shakesMostSoldFlavor))
    print("\n\t{0:s} had the lowest sales this month of ${1:,.2f}".format(leastSoldFlavor, SHAKEPRICE * shakesLeastSoldFlavor))
    print("\n\tThe total number of shakes sold this month is: {0:,d}".format(shakesSold))
    print("\n\tTotal sales for the month is: ${0:,.2f}".format(totalSales))
    print("\n\tAverage amount of sale for each shake is: ${0:,.2f}".format(totalSales/count)) #This calculates the average amout of sale
    print("\n\tThe total number of shake flavors available for sale is: {0:,d}".format(count))
    print("\nThe revenue data for each flavor was written to file ({0:s}).".format(str(outfile.name))) #This specifies where the revenue data was written
          
main()






























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#START FILE FALL/2022







































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#START FILE FALL/2022
